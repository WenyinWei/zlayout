<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZLayout EDA Library: EDA Circuit Analysis Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ZLayout EDA Library<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">Advanced Electronic Design Automation Layout Library with Bilingual Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2examples_2eda__circuit__analysis.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">EDA Circuit Analysis Example</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md332"></a> This example demonstrates advanced EDA circuit layout analysis using ZLayout. We'll create a complex circuit layout with various components and analyze it for manufacturing feasibility.</p>
<h1><a class="anchor" id="autotoc_md333"></a>
Overview</h1>
<p>Electronic Design Automation (EDA) tools must verify that circuit layouts meet manufacturing constraints. This example shows how to use ZLayout to:</p>
<ol type="1">
<li><b>Create complex circuit layouts</b> with multiple component types</li>
<li><b>Analyze manufacturing constraints</b> like spacing, angles, and intersections</li>
<li><b>Visualize analysis results</b> for design verification</li>
<li><b>Generate comprehensive reports</b> for manufacturing teams</li>
</ol>
<h1><a class="anchor" id="autotoc_md334"></a>
Complete Example Code</h1>
<div class="fragment"><div class="line"><span class="comment">#!/usr/bin/env python3</span></div>
<div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">Advanced EDA Circuit Layout Example</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">This example simulates a more realistic electronic circuit layout with:</span></div>
<div class="line"><span class="stringliteral">- Various component types (chips, resistors, capacitors, traces)</span></div>
<div class="line"><span class="stringliteral">- Different geometric constraints</span></div>
<div class="line"><span class="stringliteral">- Comprehensive analysis for manufacturing feasibility</span></div>
<div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> sys</div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"><span class="keyword">import</span> math</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Add parent directory to path</span></div>
<div class="line">sys.path.insert(0, os.path.join(os.path.dirname(__file__), <span class="stringliteral">&#39;..&#39;</span>))</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> zlayout</div>
<div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>CircuitComponent:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Represents a circuit component with properties.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>__init__(self, name: str, geometry, component_type: str = <span class="stringliteral">&quot;generic&quot;</span>):</div>
<div class="line">        self.name = name</div>
<div class="line">        self.geometry = geometry</div>
<div class="line">        self.component_type = component_type</div>
<div class="line">        self.pins = []  <span class="comment"># List of pin locations</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>add_pin(self, point: zlayout.Point, pin_name: str = <span class="stringliteral">&quot;&quot;</span>):</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Add a pin to the component.&quot;&quot;&quot;</span></div>
<div class="line">        self.pins.append((point, pin_name))</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_microcontroller(x: float, y: float) -&gt; CircuitComponent:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Create a microcontroller component with realistic dimensions.&quot;&quot;&quot;</span></div>
<div class="line">    <span class="comment"># Main body (QFP-64 package: 14mm x 14mm)</span></div>
<div class="line">    body = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout.Rectangle</a>(x, y, 14, 14)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Convert to polygon for more complex analysis</span></div>
<div class="line">    geometry = body.to_polygon()</div>
<div class="line">    </div>
<div class="line">    mcu = CircuitComponent(<span class="stringliteral">&quot;MCU_STM32F4&quot;</span>, geometry, <span class="stringliteral">&quot;microcontroller&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add pins around the perimeter (0.65mm pitch)</span></div>
<div class="line">    pin_spacing = 0.65</div>
<div class="line">    pin_count_per_side = 16</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Bottom pins (pins 1-16)</span></div>
<div class="line">    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(pin_count_per_side):</div>
<div class="line">        pin_x = x + 1.5 + i * pin_spacing</div>
<div class="line">        mcu.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(pin_x, y), f<span class="stringliteral">&quot;P{i+1}&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Right pins (pins 17-32)</span></div>
<div class="line">    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(pin_count_per_side):</div>
<div class="line">        pin_y = y + 1.5 + i * pin_spacing</div>
<div class="line">        mcu.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(x + 14, pin_y), f<span class="stringliteral">&quot;P{i+17}&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Top pins (pins 33-48)</span></div>
<div class="line">    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(pin_count_per_side):</div>
<div class="line">        pin_x = x + 12.5 - i * pin_spacing</div>
<div class="line">        mcu.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(pin_x, y + 14), f<span class="stringliteral">&quot;P{i+33}&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Left pins (pins 49-64)</span></div>
<div class="line">    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(pin_count_per_side):</div>
<div class="line">        pin_y = y + 12.5 - i * pin_spacing</div>
<div class="line">        mcu.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(x, pin_y), f<span class="stringliteral">&quot;P{i+49}&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> mcu</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_resistor(x: float, y: float, rotation: float = 0, </div>
<div class="line">                   value: str = <span class="stringliteral">&quot;1k&quot;</span>, package: str = <span class="stringliteral">&quot;0805&quot;</span>) -&gt; CircuitComponent:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Create a resistor component with specified package size.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Package dimensions (mm)</span></div>
<div class="line">    packages = {</div>
<div class="line">        <span class="stringliteral">&quot;0402&quot;</span>: (1.0, 0.5),</div>
<div class="line">        <span class="stringliteral">&quot;0603&quot;</span>: (1.6, 0.8),</div>
<div class="line">        <span class="stringliteral">&quot;0805&quot;</span>: (2.0, 1.25),</div>
<div class="line">        <span class="stringliteral">&quot;1206&quot;</span>: (3.2, 1.6)</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    length, width = packages.get(package, (2.0, 1.25))</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Create resistor body</span></div>
<div class="line">    vertices = [</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(-length/2, -width/2),</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(length/2, -width/2),</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(length/2, width/2),</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(-length/2, width/2)</div>
<div class="line">    ]</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Apply rotation and translation</span></div>
<div class="line">    cos_r, sin_r = math.cos(rotation), math.sin(rotation)</div>
<div class="line">    rotated_vertices = []</div>
<div class="line">    <span class="keywordflow">for</span> v <span class="keywordflow">in</span> vertices:</div>
<div class="line">        new_x = v.x * cos_r - v.y * sin_r + x</div>
<div class="line">        new_y = v.x * sin_r + v.y * cos_r + y</div>
<div class="line">        rotated_vertices.append(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(new_x, new_y))</div>
<div class="line">    </div>
<div class="line">    geometry = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_polygon.html">zlayout.Polygon</a>(rotated_vertices)</div>
<div class="line">    resistor = CircuitComponent(f<span class="stringliteral">&quot;R_{value}_{package}&quot;</span>, geometry, <span class="stringliteral">&quot;resistor&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add connection pads</span></div>
<div class="line">    pad_offset = length/2 * 0.8</div>
<div class="line">    resistor.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(x - pad_offset, y), <span class="stringliteral">&quot;1&quot;</span>)</div>
<div class="line">    resistor.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(x + pad_offset, y), <span class="stringliteral">&quot;2&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> resistor</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_capacitor(x: float, y: float, value: str = <span class="stringliteral">&quot;10uF&quot;</span>, </div>
<div class="line">                    package: str = <span class="stringliteral">&quot;0805&quot;</span>) -&gt; CircuitComponent:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Create a capacitor component.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Package dimensions</span></div>
<div class="line">    packages = {</div>
<div class="line">        <span class="stringliteral">&quot;0402&quot;</span>: (1.0, 0.5),</div>
<div class="line">        <span class="stringliteral">&quot;0603&quot;</span>: (1.6, 0.8),</div>
<div class="line">        <span class="stringliteral">&quot;0805&quot;</span>: (2.0, 1.25),</div>
<div class="line">        <span class="stringliteral">&quot;1206&quot;</span>: (3.2, 1.6),</div>
<div class="line">        <span class="stringliteral">&quot;1210&quot;</span>: (3.2, 2.5)  <span class="comment"># Larger for higher capacity</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    length, width = packages.get(package, (2.0, 1.25))</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Capacitor body</span></div>
<div class="line">    geometry = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout.Rectangle</a>(x-length/2, y-width/2, length, width).to_polygon()</div>
<div class="line">    </div>
<div class="line">    cap = CircuitComponent(f<span class="stringliteral">&quot;C_{value}_{package}&quot;</span>, geometry, <span class="stringliteral">&quot;capacitor&quot;</span>)</div>
<div class="line">    cap.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(x-length/2 + 0.2, y), <span class="stringliteral">&quot;1&quot;</span>)</div>
<div class="line">    cap.add_pin(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(x+length/2 - 0.2, y), <span class="stringliteral">&quot;2&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> cap</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_trace(start: zlayout.Point, end: <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>, </div>
<div class="line">                width: float = 0.2, layer: str = <span class="stringliteral">&quot;top&quot;</span>) -&gt; CircuitComponent:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Create a PCB trace (connection line with width).&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Calculate trace geometry</span></div>
<div class="line">    dx = end.x - start.x</div>
<div class="line">    dy = end.y - start.y</div>
<div class="line">    length = math.sqrt(dx*dx + dy*dy)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> length &lt; 1e-10:</div>
<div class="line">        <span class="comment"># Degenerate trace - create small rectangle</span></div>
<div class="line">        geometry = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout.Rectangle</a>(start.x, start.y, 0.1, 0.1).to_polygon()</div>
<div class="line">    <span class="keywordflow">else</span>:</div>
<div class="line">        <span class="comment"># Normalized perpendicular vector for trace width</span></div>
<div class="line">        perp_x = -dy * width / (2 * length)</div>
<div class="line">        perp_y = dx * width / (2 * length)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Create trace as a polygon</span></div>
<div class="line">        vertices = [</div>
<div class="line">            <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(start.x + perp_x, start.y + perp_y),</div>
<div class="line">            <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(end.x + perp_x, end.y + perp_y),</div>
<div class="line">            <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(end.x - perp_x, end.y - perp_y),</div>
<div class="line">            <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(start.x - perp_x, start.y - perp_y)</div>
<div class="line">        ]</div>
<div class="line">        geometry = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_polygon.html">zlayout.Polygon</a>(vertices)</div>
<div class="line">    </div>
<div class="line">    trace_name = f<span class="stringliteral">&quot;Trace_{layer}_{width}mm&quot;</span></div>
<div class="line">    <span class="keywordflow">return</span> CircuitComponent(trace_name, geometry, <span class="stringliteral">&quot;trace&quot;</span>)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_realistic_circuit_layout():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Create a realistic circuit layout representing a microcontroller board.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Define PCB bounds (50mm x 40mm)</span></div>
<div class="line">    pcb_bounds = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout.Rectangle</a>(0, 0, 50, 40)</div>
<div class="line">    processor = <a class="code hl_class" href="classzlayout_1_1analysis_1_1_geometry_processor.html">zlayout.GeometryProcessor</a>(pcb_bounds)</div>
<div class="line">    </div>
<div class="line">    components = []</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add main microcontroller (center of board)</span></div>
<div class="line">    mcu = create_microcontroller(18, 13)</div>
<div class="line">    components.append(mcu)</div>
<div class="line">    processor.add_component(mcu.geometry)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add power regulation circuit</span></div>
<div class="line">    power_components = [</div>
<div class="line">        <span class="comment"># Buck converter IC</span></div>
<div class="line">        create_resistor(8, 30, 0, <span class="stringliteral">&quot;3.3V_REG&quot;</span>, <span class="stringliteral">&quot;1206&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Input/output capacitors</span></div>
<div class="line">        create_capacitor(5, 30, <span class="stringliteral">&quot;22uF&quot;</span>, <span class="stringliteral">&quot;1210&quot;</span>),</div>
<div class="line">        create_capacitor(12, 30, <span class="stringliteral">&quot;100nF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Inductor (represented as elongated rectangle)</span></div>
<div class="line">        create_resistor(8, 27, 0, <span class="stringliteral">&quot;10uH&quot;</span>, <span class="stringliteral">&quot;1210&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Feedback resistors</span></div>
<div class="line">        create_resistor(8, 24, 0, <span class="stringliteral">&quot;10k&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_resistor(11, 24, 0, <span class="stringliteral">&quot;3.3k&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">    ]</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> power_components:</div>
<div class="line">        components.append(comp)</div>
<div class="line">        processor.add_component(comp.geometry)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add bypass capacitors near MCU</span></div>
<div class="line">    bypass_caps = [</div>
<div class="line">        create_capacitor(15, 10, <span class="stringliteral">&quot;100nF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_capacitor(35, 10, <span class="stringliteral">&quot;100nF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_capacitor(15, 30, <span class="stringliteral">&quot;100nF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_capacitor(35, 30, <span class="stringliteral">&quot;100nF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">    ]</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> cap <span class="keywordflow">in</span> bypass_caps:</div>
<div class="line">        components.append(cap)</div>
<div class="line">        processor.add_component(cap.geometry)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add crystal oscillator circuit</span></div>
<div class="line">    crystal_components = [</div>
<div class="line">        <span class="comment"># 8MHz crystal</span></div>
<div class="line">        create_resistor(40, 20, math.pi/2, <span class="stringliteral">&quot;8MHz&quot;</span>, <span class="stringliteral">&quot;HC49&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Load capacitors</span></div>
<div class="line">        create_capacitor(37, 18, <span class="stringliteral">&quot;22pF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_capacitor(37, 22, <span class="stringliteral">&quot;22pF&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">    ]</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> crystal_components:</div>
<div class="line">        components.append(comp)</div>
<div class="line">        processor.add_component(comp.geometry)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add LED indicators</span></div>
<div class="line">    led_components = [</div>
<div class="line">        create_resistor(45, 35, 0, <span class="stringliteral">&quot;LED_R&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_resistor(45, 32, 0, <span class="stringliteral">&quot;LED_G&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_resistor(45, 29, 0, <span class="stringliteral">&quot;LED_B&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Current limiting resistors</span></div>
<div class="line">        create_resistor(42, 35, 0, <span class="stringliteral">&quot;330R&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_resistor(42, 32, 0, <span class="stringliteral">&quot;330R&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">        create_resistor(42, 29, 0, <span class="stringliteral">&quot;330R&quot;</span>, <span class="stringliteral">&quot;0603&quot;</span>),</div>
<div class="line">    ]</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> led_components:</div>
<div class="line">        components.append(comp)</div>
<div class="line">        processor.add_component(comp.geometry)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add connecting traces</span></div>
<div class="line">    traces = [</div>
<div class="line">        <span class="comment"># Power traces (wider for current carrying)</span></div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(5, 30), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(15, 30), 0.5, <span class="stringliteral">&quot;power&quot;</span>),</div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(32, 25), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(40, 25), 0.3, <span class="stringliteral">&quot;power&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Signal traces</span></div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(32, 20), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(37, 20), 0.15, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(32, 18), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(37, 18), 0.15, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># LED control traces</span></div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(32, 15), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(42, 35), 0.1, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(32, 16), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(42, 32), 0.1, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(32, 17), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(42, 29), 0.1, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Some traces that might cause spacing issues (for testing)</span></div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(20, 5), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(20, 8), 0.08, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">        create_trace(<a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(20.12, 5), <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(20.12, 8), 0.08, <span class="stringliteral">&quot;signal&quot;</span>),</div>
<div class="line">    ]</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> trace <span class="keywordflow">in</span> traces:</div>
<div class="line">        components.append(trace)</div>
<div class="line">        processor.add_component(trace.geometry)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Add potentially problematic geometries for testing</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Sharp angled connector (simulating a non-standard connector)</span></div>
<div class="line">    connector_vertices = [</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(2, 15),</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(8, 16),</div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(4, 20),  <span class="comment"># Sharp angle here</span></div>
<div class="line">        <a class="code hl_class" href="classzlayout_1_1geometry_1_1_point.html">zlayout.Point</a>(1, 18)</div>
<div class="line">    ]</div>
<div class="line">    sharp_connector = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_polygon.html">zlayout.Polygon</a>(connector_vertices)</div>
<div class="line">    components.append(CircuitComponent(<span class="stringliteral">&quot;Sharp_Connector&quot;</span>, sharp_connector, <span class="stringliteral">&quot;connector&quot;</span>))</div>
<div class="line">    processor.add_component(sharp_connector)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Overlapping test components (manufacturing error simulation)</span></div>
<div class="line">    overlap_rect1 = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout.Rectangle</a>(45, 5, 3, 2).to_polygon()</div>
<div class="line">    overlap_rect2 = <a class="code hl_class" href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout.Rectangle</a>(46, 6, 3, 2).to_polygon()</div>
<div class="line">    </div>
<div class="line">    components.extend([</div>
<div class="line">        CircuitComponent(<span class="stringliteral">&quot;Test_Overlap1&quot;</span>, overlap_rect1, <span class="stringliteral">&quot;test&quot;</span>),</div>
<div class="line">        CircuitComponent(<span class="stringliteral">&quot;Test_Overlap2&quot;</span>, overlap_rect2, <span class="stringliteral">&quot;test&quot;</span>)</div>
<div class="line">    ])</div>
<div class="line">    processor.add_component(overlap_rect1)</div>
<div class="line">    processor.add_component(overlap_rect2)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> processor, components</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>analyze_manufacturing_feasibility(processor):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Comprehensive manufacturing feasibility analysis.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    print(<span class="stringliteral">&quot;=== Manufacturing Feasibility Analysis ===\n&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Define manufacturing process constraints</span></div>
<div class="line">    process_constraints = {</div>
<div class="line">        <span class="stringliteral">&quot;prototype&quot;</span>: {</div>
<div class="line">            <span class="stringliteral">&quot;min_trace_width&quot;</span>: 0.1,</div>
<div class="line">            <span class="stringliteral">&quot;min_spacing&quot;</span>: 0.1,</div>
<div class="line">            <span class="stringliteral">&quot;sharp_angle_limit&quot;</span>: 20,</div>
<div class="line">            <span class="stringliteral">&quot;description&quot;</span>: <span class="stringliteral">&quot;Prototype PCB (loose tolerances)&quot;</span></div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;standard&quot;</span>: {</div>
<div class="line">            <span class="stringliteral">&quot;min_trace_width&quot;</span>: 0.15,</div>
<div class="line">            <span class="stringliteral">&quot;min_spacing&quot;</span>: 0.15,</div>
<div class="line">            <span class="stringliteral">&quot;sharp_angle_limit&quot;</span>: 30,</div>
<div class="line">            <span class="stringliteral">&quot;description&quot;</span>: <span class="stringliteral">&quot;Standard PCB manufacturing&quot;</span></div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;high_density&quot;</span>: {</div>
<div class="line">            <span class="stringliteral">&quot;min_trace_width&quot;</span>: 0.05,</div>
<div class="line">            <span class="stringliteral">&quot;min_spacing&quot;</span>: 0.05,</div>
<div class="line">            <span class="stringliteral">&quot;sharp_angle_limit&quot;</span>: 15,</div>
<div class="line">            <span class="stringliteral">&quot;description&quot;</span>: <span class="stringliteral">&quot;High-density interconnect (HDI)&quot;</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    analysis_results = {}</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> process_name, constraints <span class="keywordflow">in</span> process_constraints.items():</div>
<div class="line">        print(f<span class="stringliteral">&quot;--- {process_name.upper()} PROCESS ---&quot;</span>)</div>
<div class="line">        print(f<span class="stringliteral">&quot;Description: {constraints[&#39;description&#39;]}&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Run layout analysis</span></div>
<div class="line">        analysis = processor.analyze_layout(</div>
<div class="line">            sharp_angle_threshold=constraints[<span class="stringliteral">&quot;sharp_angle_limit&quot;</span>],</div>
<div class="line">            narrow_distance_threshold=constraints[<span class="stringliteral">&quot;min_spacing&quot;</span>]</div>
<div class="line">        )</div>
<div class="line">        </div>
<div class="line">        analysis_results[process_name] = analysis</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Count violations</span></div>
<div class="line">        violations = 0</div>
<div class="line">        warnings = []</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> analysis[<span class="stringliteral">&#39;sharp_angles&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>] &gt; 0:</div>
<div class="line">            violations += analysis[<span class="stringliteral">&#39;sharp_angles&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>]</div>
<div class="line">            warnings.append(f<span class="stringliteral">&quot;Sharp angles: {analysis[&#39;sharp_angles&#39;][&#39;count&#39;]} violations&quot;</span>)</div>
<div class="line">            <span class="comment"># Show specific angles</span></div>
<div class="line">            <span class="keywordflow">for</span> angle_info <span class="keywordflow">in</span> analysis[<span class="stringliteral">&#39;sharp_angles&#39;</span>][<span class="stringliteral">&#39;details&#39;</span>][:3]:  <span class="comment"># Show first 3</span></div>
<div class="line">                warnings.append(f<span class="stringliteral">&quot;  - {angle_info[&#39;angle&#39;]:.1f}° at {angle_info[&#39;location&#39;]}&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> analysis[<span class="stringliteral">&#39;narrow_distances&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>] &gt; 0:</div>
<div class="line">            violations += analysis[<span class="stringliteral">&#39;narrow_distances&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>]</div>
<div class="line">            warnings.append(f<span class="stringliteral">&quot;Spacing violations: {analysis[&#39;narrow_distances&#39;][&#39;count&#39;]}&quot;</span>)</div>
<div class="line">            warnings.append(f<span class="stringliteral">&quot;  - Minimum distance: {analysis[&#39;narrow_distances&#39;][&#39;minimum&#39;]:.3f}mm&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> analysis[<span class="stringliteral">&#39;intersections&#39;</span>][<span class="stringliteral">&#39;polygon_pairs&#39;</span>] &gt; 0:</div>
<div class="line">            violations += analysis[<span class="stringliteral">&#39;intersections&#39;</span>][<span class="stringliteral">&#39;polygon_pairs&#39;</span>]</div>
<div class="line">            warnings.append(f<span class="stringliteral">&quot;Component intersections: {analysis[&#39;intersections&#39;][&#39;polygon_pairs&#39;]} pairs&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Manufacturing assessment</span></div>
<div class="line">        <span class="keywordflow">if</span> violations == 0:</div>
<div class="line">            print(<span class="stringliteral">&quot;✅ MANUFACTURABLE&quot;</span>)</div>
<div class="line">            print(<span class="stringliteral">&quot;  All constraints satisfied&quot;</span>)</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            print(f<span class="stringliteral">&quot;❌ {violations} VIOLATIONS&quot;</span>)</div>
<div class="line">            <span class="keywordflow">for</span> warning <span class="keywordflow">in</span> warnings:</div>
<div class="line">                print(f<span class="stringliteral">&quot;  {warning}&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Calculate yield estimate</span></div>
<div class="line">        yield_estimate = max(0, 100 - violations * 5)</div>
<div class="line">        print(f<span class="stringliteral">&quot;  Estimated yield: {yield_estimate}%&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        print()</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> analysis_results</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>generate_component_report(components):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Generate detailed component analysis report.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    print(<span class="stringliteral">&quot;=== Component Analysis Report ===\n&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Group components by type</span></div>
<div class="line">    component_stats = {}</div>
<div class="line">    total_area = 0</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> components:</div>
<div class="line">        comp_type = comp.component_type</div>
<div class="line">        <span class="keywordflow">if</span> comp_type <span class="keywordflow">not</span> <span class="keywordflow">in</span> component_stats:</div>
<div class="line">            component_stats[comp_type] = {</div>
<div class="line">                <span class="stringliteral">&#39;count&#39;</span>: 0,</div>
<div class="line">                <span class="stringliteral">&#39;total_area&#39;</span>: 0,</div>
<div class="line">                <span class="stringliteral">&#39;components&#39;</span>: []</div>
<div class="line">            }</div>
<div class="line">        </div>
<div class="line">        component_stats[comp_type][<span class="stringliteral">&#39;count&#39;</span>] += 1</div>
<div class="line">        component_stats[comp_type][<span class="stringliteral">&#39;components&#39;</span>].append(comp)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Calculate component area</span></div>
<div class="line">        area = comp.geometry.area()</div>
<div class="line">        component_stats[comp_type][<span class="stringliteral">&#39;total_area&#39;</span>] += area</div>
<div class="line">        total_area += area</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Print summary</span></div>
<div class="line">    print(<span class="stringliteral">&quot;Component Summary:&quot;</span>)</div>
<div class="line">    print(f<span class="stringliteral">&quot;{&#39;Type&#39;:&lt;15} {&#39;Count&#39;:&lt;8} {&#39;Area (mm²)&#39;:&lt;12} {&#39;% of Total&#39;:&lt;10}&quot;</span>)</div>
<div class="line">    print(<span class="stringliteral">&quot;-&quot;</span> * 50)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> comp_type, stats <span class="keywordflow">in</span> sorted(component_stats.items()):</div>
<div class="line">        percentage = (stats[<span class="stringliteral">&#39;total_area&#39;</span>] / total_area * 100) <span class="keywordflow">if</span> total_area &gt; 0 <span class="keywordflow">else</span> 0</div>
<div class="line">        print(f<span class="stringliteral">&quot;{comp_type:&lt;15} {stats[&#39;count&#39;]:&lt;8} {stats[&#39;total_area&#39;]:&lt;12.2f} {percentage:&lt;10.1f}%&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    print(f<span class="stringliteral">&quot;\nTotal components: {len(components)}&quot;</span>)</div>
<div class="line">    print(f<span class="stringliteral">&quot;Total area: {total_area:.2f} mm²&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Component density analysis</span></div>
<div class="line">    pcb_area = 50 * 40  <span class="comment"># PCB dimensions</span></div>
<div class="line">    utilization = (total_area / pcb_area) * 100</div>
<div class="line">    print(f<span class="stringliteral">&quot;PCB utilization: {utilization:.1f}%&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> utilization &gt; 80:</div>
<div class="line">        print(<span class="stringliteral">&quot;⚠️  High component density - consider larger PCB or double-sided layout&quot;</span>)</div>
<div class="line">    <span class="keywordflow">elif</span> utilization &lt; 30:</div>
<div class="line">        print(<span class="stringliteral">&quot;ℹ️  Low component density - PCB size could be optimized&quot;</span>)</div>
<div class="line">    <span class="keywordflow">else</span>:</div>
<div class="line">        print(<span class="stringliteral">&quot;✅ Good component density&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> component_stats</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>create_visualization(processor, components, analysis_results):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Create comprehensive visualization of the circuit and analysis.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    print(<span class="stringliteral">&quot;\n=== Creating Visualizations ===&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        <span class="comment"># Create visualizer with larger figure</span></div>
<div class="line">        visualizer = <a class="code hl_class" href="classzlayout_1_1visualization_1_1_layout_visualizer.html">zlayout.LayoutVisualizer</a>(figsize=(16, 12))</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Extract geometries for visualization</span></div>
<div class="line">        polygons = [comp.geometry <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> components <span class="keywordflow">if</span> hasattr(comp.geometry, <span class="stringliteral">&#39;vertices&#39;</span>)]</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Create main layout plot</span></div>
<div class="line">        print(<span class="stringliteral">&quot;Creating circuit layout visualization...&quot;</span>)</div>
<div class="line">        fig1 = visualizer.plot_layout(</div>
<div class="line">            polygons, </div>
<div class="line">            title=<span class="stringliteral">&quot;Microcontroller Board Layout&quot;</span>,</div>
<div class="line">            show_grid=<span class="keyword">True</span>,</div>
<div class="line">            grid_spacing=5.0,</div>
<div class="line">            component_labels=<span class="keyword">False</span>  <span class="comment"># Too many components for labels</span></div>
<div class="line">        )</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Add component type coloring</span></div>
<div class="line">        colors = {</div>
<div class="line">            <span class="stringliteral">&#39;microcontroller&#39;</span>: <span class="stringliteral">&#39;red&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;resistor&#39;</span>: <span class="stringliteral">&#39;blue&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;capacitor&#39;</span>: <span class="stringliteral">&#39;green&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;trace&#39;</span>: <span class="stringliteral">&#39;gray&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;connector&#39;</span>: <span class="stringliteral">&#39;orange&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;test&#39;</span>: <span class="stringliteral">&#39;purple&#39;</span></div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> components:</div>
<div class="line">            <span class="keywordflow">if</span> hasattr(comp.geometry, <span class="stringliteral">&#39;vertices&#39;</span>):</div>
<div class="line">                color = colors.get(comp.component_type, <span class="stringliteral">&#39;black&#39;</span>)</div>
<div class="line">                visualizer.add_component_highlight(comp.geometry, color=color, alpha=0.6)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Create analysis results visualization</span></div>
<div class="line">        print(<span class="stringliteral">&quot;Creating analysis visualization...&quot;</span>)</div>
<div class="line">        fig2 = visualizer.plot_analysis_results(</div>
<div class="line">            polygons, </div>
<div class="line">            analysis_results[<span class="stringliteral">&#39;standard&#39;</span>],</div>
<div class="line">            title=<span class="stringliteral">&quot;Design Rule Check Results (Standard Process)&quot;</span></div>
<div class="line">        )</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Create process comparison chart</span></div>
<div class="line">        print(<span class="stringliteral">&quot;Creating process comparison...&quot;</span>)</div>
<div class="line">        fig3 = visualizer.create_process_comparison_chart(analysis_results)</div>
<div class="line">        </div>
<div class="line">        plt.tight_layout()</div>
<div class="line">        plt.show()</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> [fig1, fig2, fig3]</div>
<div class="line">        </div>
<div class="line">    <span class="keywordflow">except</span> ImportError:</div>
<div class="line">        print(<span class="stringliteral">&quot;Matplotlib not available. Install with: pip install matplotlib&quot;</span>)</div>
<div class="line">        <span class="keywordflow">return</span> []</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span><a class="code hl_function" href="advanced__layout__optimization_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>():</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Main function demonstrating comprehensive EDA circuit analysis.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    print(<span class="stringliteral">&quot;🔧 ZLayout - Advanced EDA Circuit Analysis&quot;</span>)</div>
<div class="line">    print(<span class="stringliteral">&quot;=&quot;</span> * 60)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Initialize ZLayout</span></div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> <a class="code hl_function" href="namespacezlayout.html#a0a9410e74d4230914f05315b9ab329f2">zlayout.initialize</a>():</div>
<div class="line">        print(<span class="stringliteral">&quot;❌ Failed to initialize ZLayout&quot;</span>)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        <span class="comment"># Create realistic circuit layout</span></div>
<div class="line">        print(<span class="stringliteral">&quot;Creating realistic microcontroller board layout...&quot;</span>)</div>
<div class="line">        processor, components = create_realistic_circuit_layout()</div>
<div class="line">        print(f<span class="stringliteral">&quot;✅ Created layout with {len(components)} components&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Analyze manufacturing feasibility</span></div>
<div class="line">        analysis_results = analyze_manufacturing_feasibility(processor)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Generate component report</span></div>
<div class="line">        component_stats = generate_component_report(components)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Create visualizations</span></div>
<div class="line">        figures = create_visualization(processor, components, analysis_results)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Generate final report</span></div>
<div class="line">        print(<span class="stringliteral">&quot;\n=== Final Assessment ===&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Find best manufacturing process</span></div>
<div class="line">        best_process = <span class="keywordtype">None</span></div>
<div class="line">        min_violations = float(<span class="stringliteral">&#39;inf&#39;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> process_name, analysis <span class="keywordflow">in</span> analysis_results.items():</div>
<div class="line">            violations = (analysis[<span class="stringliteral">&#39;sharp_angles&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>] + </div>
<div class="line">                         analysis[<span class="stringliteral">&#39;narrow_distances&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>] + </div>
<div class="line">                         analysis[<span class="stringliteral">&#39;intersections&#39;</span>][<span class="stringliteral">&#39;polygon_pairs&#39;</span>])</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> violations &lt; min_violations:</div>
<div class="line">                min_violations = violations</div>
<div class="line">                best_process = process_name</div>
<div class="line">        </div>
<div class="line">        print(f<span class="stringliteral">&quot;Recommended process: {best_process.upper()}&quot;</span>)</div>
<div class="line">        print(f<span class="stringliteral">&quot;Total violations: {min_violations}&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> min_violations == 0:</div>
<div class="line">            print(<span class="stringliteral">&quot;✅ Design is ready for manufacturing!&quot;</span>)</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            print(<span class="stringliteral">&quot;⚠️  Design needs revision before manufacturing&quot;</span>)</div>
<div class="line">            print(<span class="stringliteral">&quot;\nRecommended actions:&quot;</span>)</div>
<div class="line">            print(<span class="stringliteral">&quot;1. Increase spacing between narrow traces&quot;</span>)</div>
<div class="line">            print(<span class="stringliteral">&quot;2. Smooth sharp angles in connector geometries&quot;</span>)</div>
<div class="line">            print(<span class="stringliteral">&quot;3. Check for component overlaps&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Offer to save results</span></div>
<div class="line">        save_results = input(<span class="stringliteral">&quot;\nSave analysis results and visualizations? (y/n): &quot;</span>).lower().strip()</div>
<div class="line">        <span class="keywordflow">if</span> save_results == <span class="stringliteral">&#39;y&#39;</span>:</div>
<div class="line">            <span class="comment"># Save visualizations</span></div>
<div class="line">            <span class="keywordflow">if</span> figures:</div>
<div class="line">                visualizer = <a class="code hl_class" href="classzlayout_1_1visualization_1_1_layout_visualizer.html">zlayout.LayoutVisualizer</a>()</div>
<div class="line">                visualizer.save_plots(figures, <span class="stringliteral">&quot;eda_circuit_analysis&quot;</span>)</div>
<div class="line">            </div>
<div class="line">            <span class="comment"># Save detailed report</span></div>
<div class="line">            <span class="keyword">with</span> open(<span class="stringliteral">&quot;eda_analysis_report.txt&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>) <span class="keyword">as</span> f:</div>
<div class="line">                f.write(<span class="stringliteral">&quot;ZLayout EDA Circuit Analysis Report\n&quot;</span>)</div>
<div class="line">                f.write(<span class="stringliteral">&quot;=&quot;</span> * 50 + <span class="stringliteral">&quot;\n\n&quot;</span>)</div>
<div class="line">                </div>
<div class="line">                f.write(<span class="stringliteral">&quot;COMPONENT SUMMARY\n&quot;</span>)</div>
<div class="line">                f.write(<span class="stringliteral">&quot;-&quot;</span> * 20 + <span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line">                <span class="keywordflow">for</span> comp_type, stats <span class="keywordflow">in</span> component_stats.items():</div>
<div class="line">                    f.write(f<span class="stringliteral">&quot;{comp_type}: {stats[&#39;count&#39;]} components, &quot;</span></div>
<div class="line">                           f<span class="stringliteral">&quot;{stats[&#39;total_area&#39;]:.2f} mm²\n&quot;</span>)</div>
<div class="line">                </div>
<div class="line">                f.write(<span class="stringliteral">&quot;\nMANUFACTURING ANALYSIS\n&quot;</span>)</div>
<div class="line">                f.write(<span class="stringliteral">&quot;-&quot;</span> * 25 + <span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line">                <span class="keywordflow">for</span> process_name, analysis <span class="keywordflow">in</span> analysis_results.items():</div>
<div class="line">                    violations = (analysis[<span class="stringliteral">&#39;sharp_angles&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>] + </div>
<div class="line">                                analysis[<span class="stringliteral">&#39;narrow_distances&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>] + </div>
<div class="line">                                analysis[<span class="stringliteral">&#39;intersections&#39;</span>][<span class="stringliteral">&#39;polygon_pairs&#39;</span>])</div>
<div class="line">                    f.write(f<span class="stringliteral">&quot;{process_name}: {violations} violations\n&quot;</span>)</div>
<div class="line">                </div>
<div class="line">                f.write(f<span class="stringliteral">&quot;\nRECOMMENDED PROCESS: {best_process.upper()}\n&quot;</span>)</div>
<div class="line">            </div>
<div class="line">            print(<span class="stringliteral">&quot;✅ Results saved to files!&quot;</span>)</div>
<div class="line">        </div>
<div class="line">    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line">        print(f<span class="stringliteral">&quot;❌ Error during analysis: {e}&quot;</span>)</div>
<div class="line">        <span class="keyword">import</span> traceback</div>
<div class="line">        traceback.print_exc()</div>
<div class="line">        </div>
<div class="line">    <span class="keywordflow">finally</span>:</div>
<div class="line">        <span class="comment"># Clean up</span></div>
<div class="line">        <a class="code hl_function" href="namespacezlayout.html#a127850cb0a7aca4fdc15e404b875d7b6">zlayout.cleanup</a>()</div>
<div class="line">    </div>
<div class="line">    print(<span class="stringliteral">&quot;\n🎉 EDA circuit analysis completed!&quot;</span>)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    <a class="code hl_function" href="advanced__layout__optimization_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>()</div>
<div class="ttc" id="aadvanced__layout__optimization_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="advanced__layout__optimization_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> <a href="advanced__layout__optimization_8cpp_source.html#l00467">advanced_layout_optimization.cpp:467</a></div></div>
<div class="ttc" id="aclasszlayout_1_1analysis_1_1_geometry_processor_html"><div class="ttname"><a href="classzlayout_1_1analysis_1_1_geometry_processor.html">zlayout.analysis.GeometryProcessor</a></div><div class="ttdef"><b>Definition</b> <a href="analysis_8py_source.html#l00306">analysis.py:306</a></div></div>
<div class="ttc" id="aclasszlayout_1_1geometry_1_1_point_html"><div class="ttname"><a href="classzlayout_1_1geometry_1_1_point.html">zlayout::geometry::Point</a></div><div class="ttdoc">2D point with high-precision coordinates and utility methods</div><div class="ttdef"><b>Definition</b> <a href="point_8hpp_source.html#l00023">point.hpp:23</a></div></div>
<div class="ttc" id="aclasszlayout_1_1geometry_1_1_polygon_html"><div class="ttname"><a href="classzlayout_1_1geometry_1_1_polygon.html">zlayout::geometry::Polygon</a></div><div class="ttdoc">Polygon class supporting both convex and concave polygons.</div><div class="ttdef"><b>Definition</b> <a href="polygon_8hpp_source.html#l00025">polygon.hpp:25</a></div></div>
<div class="ttc" id="aclasszlayout_1_1geometry_1_1_rectangle_html"><div class="ttname"><a href="classzlayout_1_1geometry_1_1_rectangle.html">zlayout::geometry::Rectangle</a></div><div class="ttdoc">Axis-aligned rectangle for bounding boxes and simple EDA components.</div><div class="ttdef"><b>Definition</b> <a href="rectangle_8hpp_source.html#l00026">rectangle.hpp:26</a></div></div>
<div class="ttc" id="aclasszlayout_1_1visualization_1_1_layout_visualizer_html"><div class="ttname"><a href="classzlayout_1_1visualization_1_1_layout_visualizer.html">zlayout::visualization.LayoutVisualizer</a></div><div class="ttdef"><b>Definition</b> <a href="visualization_8py_source.html#l00018">visualization.py:18</a></div></div>
<div class="ttc" id="anamespacezlayout_html_a0a9410e74d4230914f05315b9ab329f2"><div class="ttname"><a href="namespacezlayout.html#a0a9410e74d4230914f05315b9ab329f2">zlayout::initialize</a></div><div class="ttdeci">bool initialize(bool enable_openmp=true)</div><div class="ttdoc">Initialize ZLayout library.</div><div class="ttdef"><b>Definition</b> <a href="zlayout_8cpp_source.html#l00030">zlayout.cpp:30</a></div></div>
<div class="ttc" id="anamespacezlayout_html_a127850cb0a7aca4fdc15e404b875d7b6"><div class="ttname"><a href="namespacezlayout.html#a127850cb0a7aca4fdc15e404b875d7b6">zlayout::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdoc">Cleanup ZLayout library resources.</div><div class="ttdef"><b>Definition</b> <a href="zlayout_8cpp_source.html#l00072">zlayout.cpp:72</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md335"></a>
Key Learning Points</h1>
<h2><a class="anchor" id="autotoc_md336"></a>
1. Realistic Component Modeling</h2>
<p>This example shows how to model real electronic components with accurate dimensions:</p>
<ul>
<li><b>Microcontroller</b>: QFP-64 package with 0.65mm pin pitch</li>
<li><b>Resistors/Capacitors</b>: Standard SMD packages (0402, 0603, 0805, 1206)</li>
<li><b>Traces</b>: Proper width calculation for current carrying capacity</li>
<li><b>Connectors</b>: Complex geometries that may have sharp angles</li>
</ul>
<h2><a class="anchor" id="autotoc_md337"></a>
2. Manufacturing Constraints</h2>
<p>Different PCB manufacturing processes have different capabilities:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Process   </th><th class="markdownTableHeadNone">Min Trace Width   </th><th class="markdownTableHeadNone">Min Spacing   </th><th class="markdownTableHeadNone">Sharp Angle Limit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prototype   </td><td class="markdownTableBodyNone">0.1mm   </td><td class="markdownTableBodyNone">0.1mm   </td><td class="markdownTableBodyNone">20°    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Standard   </td><td class="markdownTableBodyNone">0.15mm   </td><td class="markdownTableBodyNone">0.15mm   </td><td class="markdownTableBodyNone">30°    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HDI   </td><td class="markdownTableBodyNone">0.05mm   </td><td class="markdownTableBodyNone">0.05mm   </td><td class="markdownTableBodyNone">15°   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md338"></a>
3. Design Rule Checking (DRC)</h2>
<p>The analysis checks for common manufacturing issues:</p>
<ul>
<li><b>Sharp angles</b>: Can cause etching problems</li>
<li><b>Narrow spacing</b>: Risk of shorts or manufacturing defects</li>
<li><b>Component overlaps</b>: Physical conflicts in assembly</li>
</ul>
<h2><a class="anchor" id="autotoc_md339"></a>
4. Component Density Analysis</h2>
<p>Optimal PCB utilization depends on:</p><ul>
<li>Component count and size</li>
<li>Thermal considerations</li>
<li>Assembly accessibility</li>
<li>Cost optimization</li>
</ul>
<h2><a class="anchor" id="autotoc_md340"></a>
5. Visualization for Design Review</h2>
<p>Effective visualization helps identify:</p><ul>
<li>Component placement issues</li>
<li>Routing congestion</li>
<li>Manufacturing constraint violations</li>
<li>Design optimization opportunities</li>
</ul>
<h1><a class="anchor" id="autotoc_md341"></a>
Running the Example</h1>
<div class="fragment"><div class="line"># Run the complete analysis</div>
<div class="line">python eda_circuit_analysis.py</div>
<div class="line"> </div>
<div class="line"># Expected output:</div>
<div class="line"># - Component count by type</div>
<div class="line"># - Manufacturing feasibility for each process</div>
<div class="line"># - Visual layout with analysis overlay</div>
<div class="line"># - Detailed report with recommendations</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md342"></a>
Educational Insights</h1>
<h2><a class="anchor" id="autotoc_md343"></a>
Why This Example Matters</h2>
<ol type="1">
<li><b>Real-world applicability</b>: Uses actual component packages and constraints</li>
<li><b>Manufacturing awareness</b>: Teaches the importance of DRC early in design</li>
<li><b>Process optimization</b>: Shows how to choose the right manufacturing process</li>
<li><b>Quality metrics</b>: Demonstrates yield estimation and risk assessment</li>
</ol>
<h2><a class="anchor" id="autotoc_md344"></a>
Extensions and Variations</h2>
<p>Try modifying the example to explore:</p>
<ul>
<li><b>Different component types</b>: Add inductors, crystals, connectors</li>
<li><b>Multi-layer boards</b>: Separate power and signal layers</li>
<li><b>Thermal analysis</b>: Add temperature constraints</li>
<li><b>Signal integrity</b>: Consider high-speed design rules</li>
<li><b>Assembly constraints</b>: Add pick-and-place accessibility checks</li>
</ul>
<p>This example provides a solid foundation for understanding how ZLayout can be used in real EDA workflows, from initial design through manufacturing verification.</p>
<hr  />
<p><em>This example demonstrates the power of ZLayout for professional EDA applications. The combination of geometric analysis, manufacturing constraints, and visualization capabilities makes it suitable for production use in electronic design workflows.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
